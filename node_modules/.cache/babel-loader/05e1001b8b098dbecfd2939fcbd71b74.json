{"remainingRequest":"/Users/arush/Desktop/vue course/live_chat/node_modules/babel-loader/lib/index.js!/Users/arush/Desktop/vue course/live_chat/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/arush/Desktop/vue course/live_chat/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/arush/Desktop/vue course/live_chat/src/components/ChatWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/arush/Desktop/vue course/live_chat/src/components/ChatWindow.vue","mtime":1654354857737},{"path":"/Users/arush/Desktop/vue course/live_chat/babel.config.js","mtime":1654334875805},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/cache-loader/dist/cjs.js","mtime":1654334873241},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/babel-loader/lib/index.js","mtime":1654334873419},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/cache-loader/dist/cjs.js","mtime":1654334873241},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/vue-loader-v16/dist/index.js","mtime":1654334873418}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FydXNoL0Rlc2t0b3AvdnVlIGNvdXJzZS9saXZlX2NoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgZ2V0Q29sbGVjdGlvbiBmcm9tICcuLi9jb21wb3NhYmxlcy9nZXRDb2xsZWN0aW9uJzsKaW1wb3J0IHsgY29tcHV0ZWQsIG9uVXBkYXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2VUb05vdyB9IGZyb20gJ2RhdGUtZm5zJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBfZ2V0Q29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb24oJ21lc3NhZ2VzJyksCiAgICAgICAgZXJyb3IgPSBfZ2V0Q29sbGVjdGlvbi5lcnJvciwKICAgICAgICBkb2N1bWVudHMgPSBfZ2V0Q29sbGVjdGlvbi5kb2N1bWVudHM7CgogICAgdmFyIGZvcm1hdHRlZERvY3VtZW50cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRvY3VtZW50cy52YWx1ZSkgewogICAgICAgIHJldHVybiBkb2N1bWVudHMudmFsdWUubWFwKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgIHZhciB0aW1lID0gZm9ybWF0RGlzdGFuY2VUb05vdyhkb2MuY3JlYXRlZEF0LnRvRGF0ZSgpKTsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRvYyksIHt9LCB7CiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGltZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIG1lc3NhZ2VzID0gcmVmKG51bGwpOwogICAgb25VcGRhdGVkKGZ1bmN0aW9uICgpIHsKICAgICAgbWVzc2FnZXMudmFsdWUuc2Nyb2xsVG9wID0gbWVzc2FnZXMudmFsdWUuc2Nyb2xsSGVpZ2h0OwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBlcnJvcjogZXJyb3IsCiAgICAgIGRvY3VtZW50czogZG9jdW1lbnRzLAogICAgICBmb3JtYXR0ZWREb2N1bWVudHM6IGZvcm1hdHRlZERvY3VtZW50cywKICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;AAcA,OAAOA,aAAP,MAA0B,8BAA1B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,GAA9B,QAAyC,KAAzC;AACA,SAASC,mBAAT,QAAoC,UAApC;AACA,eAAe;EACbC,KADa,mBACL;IACN,qBAA6BL,aAAa,CAAC,UAAD,CAA1C;IAAA,IAAQM,KAAR,kBAAQA,KAAR;IAAA,IAAeC,SAAf,kBAAeA,SAAf;;IAEA,IAAMC,kBAAiB,GAAIP,QAAQ,CAAC,YAAM;MACxC,IAAIM,SAAS,CAACE,KAAd,EAAqB;QACnB,OAAOF,SAAS,CAACE,KAAV,CAAgBC,GAAhB,CAAoB,aAAE,EAAK;UAChC,IAAIC,IAAG,GAAIP,mBAAmB,CAACQ,GAAG,CAACC,SAAJ,CAAcC,MAAd,EAAD,CAA9B;UACA,uCAAYF,GAAZ;YAAiBC,SAAS,EAAEF;UAA5B;QACD,CAHM,CAAP;MAIF;IACD,CAPkC,CAAnC;IASD,IAAMI,QAAO,GAAIZ,GAAG,CAAC,IAAD,CAApB;IAEAD,SAAS,CAAC,YAAM;MACZa,QAAQ,CAACN,KAAT,CAAeO,SAAf,GAAyBD,QAAQ,CAACN,KAAT,CAAeQ,YAAxC;IACH,CAFQ,CAAT;IAIC,OAAO;MAAEX,KAAK,EAALA,KAAF;MAASC,SAAS,EAATA,SAAT;MAAoBC,kBAAkB,EAAlBA,kBAApB;MAAwCO,QAAO,EAAPA;IAAxC,CAAP;EACF;AApBa,CAAf","names":["getCollection","computed","onUpdated","ref","formatDistanceToNow","setup","error","documents","formattedDocuments","value","map","time","doc","createdAt","toDate","messages","scrollTop","scrollHeight"],"sourceRoot":"","sources":["/Users/arush/Desktop/vue course/live_chat/src/components/ChatWindow.vue"],"sourcesContent":["<template>\n  <div class=\"chat-window\">\n    <div v-if=\"error\">{{ error }}</div>\n    <div v-if=\"formattedDocuments\" class=\"messages\" ref=\"messages\">\n      <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\n        <span class=\"created-at\">{{ doc.createdAt }}</span>\n        <span class=\"name\">{{ doc.name }}</span>\n        <span class=\"message\">{{ doc.message }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getCollection from '../composables/getCollection'\nimport { computed, onUpdated, ref } from 'vue'\nimport { formatDistanceToNow } from 'date-fns'\nexport default {\n  setup() {\n    const { error, documents } = getCollection('messages')\n   \n    const formattedDocuments = computed(() => {\n      if (documents.value) {\n        return documents.value.map(doc => {\n          let time = formatDistanceToNow(doc.createdAt.toDate())\n          return { ...doc, createdAt: time }\n        })\n      }\n    })\n\n   const messages = ref(null)\n\n   onUpdated(() => {\n       messages.value.scrollTop=messages.value.scrollHeight\n   })\n\n    return { error, documents, formattedDocuments, messages }\n  }\n}\n</script>\n\n<style scoped>\n  .chat-window {\n    background: #fafafa;\n    padding: 30px 20px;\n  }\n  .single {\n    margin: 18px 0;\n  }\n  .created-at {\n    display: block;\n    color: #999;\n    font-size: 12px;\n    margin-bottom: 4px;\n  }\n  .name {\n    font-weight: bold;\n    margin-right: 6px;\n  }\n  .messages {\n    max-height: 400px;\n    overflow: auto;\n  }\n</style>"]}]}