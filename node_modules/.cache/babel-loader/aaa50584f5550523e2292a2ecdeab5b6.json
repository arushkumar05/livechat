{"remainingRequest":"/Users/arush/Desktop/vue course/live_chat/node_modules/thread-loader/dist/cjs.js!/Users/arush/Desktop/vue course/live_chat/node_modules/babel-loader/lib/index.js!/Users/arush/Desktop/vue course/live_chat/src/composables/getCollection.js","dependencies":[{"path":"/Users/arush/Desktop/vue course/live_chat/src/composables/getCollection.js","mtime":1654355430858},{"path":"/Users/arush/Desktop/vue course/live_chat/babel.config.js","mtime":1654334875805},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/cache-loader/dist/cjs.js","mtime":1654334873241},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/thread-loader/dist/cjs.js","mtime":1654334873241},{"path":"/Users/arush/Desktop/vue course/live_chat/node_modules/babel-loader/lib/index.js","mtime":1654334873419}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FydXNoL0Rlc2t0b3AvdnVlIGNvdXJzZS9saXZlX2NoYXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IHJlZiwgd2F0Y2hFZmZlY3QgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBwcm9qZWN0RmlyZXN0b3JlIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJzsKCnZhciBnZXRDb2xsZWN0aW9uID0gZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbihjb2xsZWN0aW9uKSB7CiAgdmFyIGRvY3VtZW50cyA9IHJlZihudWxsKTsKICB2YXIgZXJyb3IgPSByZWYobnVsbCk7CiAgdmFyIGNvbGxlY3Rpb25SZWYgPSBwcm9qZWN0RmlyZXN0b3JlLmNvbGxlY3Rpb24oY29sbGVjdGlvbikub3JkZXJCeSgnY3JlYXRlZEF0Jyk7CiAgdmFyIHVuc3ViID0gY29sbGVjdGlvblJlZi5vblNuYXBzaG90KGZ1bmN0aW9uIChzbmFwKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgc25hcC5kb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICBkb2MuZGF0YSgpLmNyZWF0ZWRBdCAmJiByZXN1bHRzLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkb2MuZGF0YSgpKSwge30sIHsKICAgICAgICBpZDogZG9jLmlkCiAgICAgIH0pKTsKICAgIH0pOwogICAgZG9jdW1lbnRzLnZhbHVlID0gcmVzdWx0czsKICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICBkb2N1bWVudHMudmFsdWUgPSBudWxsOwogICAgZXJyb3IudmFsdWUgPSAnY291bGQgbm90IGZldGNoIHRoZSBkYXRhJzsKICB9KTsKICB3YXRjaEVmZmVjdChmdW5jdGlvbiAob25JbnZhbGlkYXRlKSB7CiAgICAvL3RvIHVuc3ViIGZyb20gcHJldmlvdXMgY29sbGVjdGlvbiB3aGVuIHdhdGNoZXMgaXMgc3RvcHBlZC9jb21wb25lbnQgdW5tb3VudGVkCiAgICBvbkludmFsaWRhdGUoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdW5zdWIoKTsKICAgIH0pOwogIH0pOwogIHJldHVybiB7CiAgICBlcnJvcjogZXJyb3IsCiAgICBkb2N1bWVudHM6IGRvY3VtZW50cwogIH07Cn07CgpleHBvcnQgZGVmYXVsdCBnZXRDb2xsZWN0aW9uOw=="},{"version":3,"names":["ref","watchEffect","projectFirestore","getCollection","collection","documents","error","collectionRef","orderBy","unsub","onSnapshot","snap","results","docs","forEach","doc","data","createdAt","push","id","value","err","console","log","message","onInvalidate"],"sources":["/Users/arush/Desktop/vue course/live_chat/src/composables/getCollection.js"],"sourcesContent":["import { ref, watchEffect } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst getCollection = (collection) => {\n\n  const documents = ref(null)\n  const error = ref(null)\n\n  let collectionRef = projectFirestore.collection(collection)\n    .orderBy('createdAt')\n\n  const unsub = collectionRef.onSnapshot(snap => {\n    let results = [];\n    snap.docs.forEach(doc => {\n      doc.data().createdAt && results.push({...doc.data(), id: doc.id})\n    });\n    \n    documents.value = results;\n    error.value = null;\n  }, err => {\n    console.log(err.message)\n    documents.value = null\n    error.value = 'could not fetch the data'\n  })\n\n  watchEffect((onInvalidate) => {\n      //to unsub from previous collection when watches is stopped/component unmounted\n            onInvalidate(()=> unsub())\n  })\n\n  return { error, documents }\n}\n\nexport default getCollection"],"mappings":";;;AAAA,SAASA,GAAT,EAAcC,WAAd,QAAiC,KAAjC;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,UAAD,EAAgB;EAEpC,IAAMC,SAAS,GAAGL,GAAG,CAAC,IAAD,CAArB;EACA,IAAMM,KAAK,GAAGN,GAAG,CAAC,IAAD,CAAjB;EAEA,IAAIO,aAAa,GAAGL,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,EACjBI,OADiB,CACT,WADS,CAApB;EAGA,IAAMC,KAAK,GAAGF,aAAa,CAACG,UAAd,CAAyB,UAAAC,IAAI,EAAI;IAC7C,IAAIC,OAAO,GAAG,EAAd;IACAD,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkB,UAAAC,GAAG,EAAI;MACvBA,GAAG,CAACC,IAAJ,GAAWC,SAAX,IAAwBL,OAAO,CAACM,IAAR,iCAAiBH,GAAG,CAACC,IAAJ,EAAjB;QAA6BG,EAAE,EAAEJ,GAAG,CAACI;MAArC,GAAxB;IACD,CAFD;IAIAd,SAAS,CAACe,KAAV,GAAkBR,OAAlB;IACAN,KAAK,CAACc,KAAN,GAAc,IAAd;EACD,CARa,EAQX,UAAAC,GAAG,EAAI;IACRC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;IACAnB,SAAS,CAACe,KAAV,GAAkB,IAAlB;IACAd,KAAK,CAACc,KAAN,GAAc,0BAAd;EACD,CAZa,CAAd;EAcAnB,WAAW,CAAC,UAACwB,YAAD,EAAkB;IAC1B;IACMA,YAAY,CAAC;MAAA,OAAKhB,KAAK,EAAV;IAAA,CAAD,CAAZ;EACT,CAHU,CAAX;EAKA,OAAO;IAAEH,KAAK,EAALA,KAAF;IAASD,SAAS,EAATA;EAAT,CAAP;AACD,CA5BD;;AA8BA,eAAeF,aAAf"}]}